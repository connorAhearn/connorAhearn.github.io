<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Game of Thrones Predictions</title>

    <!-- Bootstrap CDN -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- TODO: Move this CSS to its own file -->
    <style>
        /* 
            Bootstrap Carousel Arrow colouring trick:
            https://stackoverflow.com/questions/49391266/change-bootstrap-4-carousel-control-colors/49391884
        */
        .carousel-control-prev-icon {
            background-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23888' viewBox='0 0 8 8'%3E%3Cpath d='M5.25 0l-4 4 4 4 1.5-1.5-2.5-2.5 2.5-2.5-1.5-1.5z'/%3E%3C/svg%3E");
        }

        .carousel-control-next-icon {
            background-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23888' viewBox='0 0 8 8'%3E%3Cpath d='M2.75 0l-1.5 1.5 2.5 2.5-2.5 2.5 1.5 1.5 4-4-4-4z'/%3E%3C/svg%3E");
        }
    </style>


</head>

<body>

    <!-- TODO: Move this Javascript to its own file -->
    <script>

        let characters = [
            'Jon Snow',
            'Arya Stark',
            'Sansa Stark',
            'Bran Stark',
            'Daenerys Targaryen',
            'Cersei Lannister',
            'Jamie Lannister',
            'Tyrion Lannister',
            'Brienne of Tarth',
            'Melisandre',
            'Varys',
            'Davos Seaworth',
            'Gendry',
            'Samwell Tarly',
            'Gilly',
            'Baby Sam',
            'Ghost',
            'Nymeria',
            'The Night King',
            'Jorah Mormont',
            'Lyanna Mormont',
            'Qyburn',
            'The Mountain',
            'The Hound',
            'Euron Greyjoy',
            'Theon Greyjoy',
            'Yara Greyjoy',
            'Bronn',
            'Podrick Payne',
            'Grey Worm',
            'Missandei',
            'Beric Dondarrion',
            'Tormund',
            'Drogon',
            'Rhaegal',
            'Hot Pie'
        ]

        let start = [];
        let episode1 = [];
        let episode2 = [];
        let episode3 = [];
        let episode4 = [];
        let episode5 = [];
        let episode6 = [];

        let start_answers = [
            1,      // Jon alive
            1,      // Arya alive
            1,      // Sansa alive
            1,      // Bran alive
            1,      // Daenerys alive
            1,      // Cersei alive
            1,      // Jamie alive
            1,      // Tyrion alive
            1,      // Brienne alive
            1,      // Melisandre alive
            1,      // Varys alive
            1,      // Davos alive
            1,      // Gendry alive
            1,      // Samwell alive
            1,      // Gilly alive
            1,      // Baby Sam alive
            1,      // Ghost alive
            1,      // Nymeria alive
            1,      // The Night King alive
            1,      // Jorah Mormont alive
            1,      // Lyanna Mormont alive
            1,      // Qyburn alive
            1,      // The Mountain alive
            1,      // The Hound alive
            1,      // Euron alive
            1,      // Theon alive
            1,      // Yara alive
            1,      // Bronn alive
            1,      // Podrick alive
            1,      // Grey Worm alive
            1,      // Missandei alive
            1,      // Beric alive
            1,      // Tormund alive
            1,      // Drogon alive
            1,      // Rhaegal alive
            1       // Hot Pie alive   
        ];

        // Since nobody died in episode 1 or 2, the answers are the same as the start
        let ep1_answers = start_answers;
        let ep2_answers = start_answers;

        // Future episodes will be updated as they air
        let ep3_answers = ep2_answers;
        let ep4_answers = ep3_answers;
        let ep5_answers = ep4_answers;
        let ep6_answers = ep5_answers;

        function update_scores(predictions, answers) {

            let score = 0;

            for (let i = 0; i < answers.length; i++) {
                if (answers[i] == predictions[i]) score++;
            }

            return score;
        }

        let adam_predictions = [1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0];
        let chris_predictions = [0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1];
        let connor_predictions = [0, 1, 1, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 1, 0, 1];
        let jac_predictions = [1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1];
        let julia_predictions = [1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1];

        start[0] = update_scores(adam_predictions, start_answers);
        start[1] = update_scores(chris_predictions, start_answers);
        start[2] = update_scores(connor_predictions, start_answers);
        start[3] = update_scores(jac_predictions, start_answers);
        start[4] = update_scores(julia_predictions, start_answers);

        episode1[0] = update_scores(adam_predictions, ep1_answers);
        episode1[1] = update_scores(chris_predictions, ep1_answers);
        episode1[2] = update_scores(connor_predictions, ep1_answers);
        episode1[3] = update_scores(jac_predictions, ep1_answers);
        episode1[4] = update_scores(julia_predictions, ep1_answers);

        episode2[0] = update_scores(adam_predictions, ep2_answers);
        episode2[1] = update_scores(chris_predictions, ep2_answers);
        episode2[2] = update_scores(connor_predictions, ep2_answers);
        episode2[3] = update_scores(jac_predictions, ep2_answers);
        episode2[4] = update_scores(julia_predictions, ep2_answers);

        episode3[0] = update_scores(adam_predictions, ep3_answers);
        episode3[1] = update_scores(chris_predictions, ep3_answers);
        episode3[2] = update_scores(connor_predictions, ep3_answers);
        episode3[3] = update_scores(jac_predictions, ep3_answers);
        episode3[4] = update_scores(julia_predictions, ep3_answers);

        episode4[0] = update_scores(adam_predictions, ep4_answers);
        episode4[1] = update_scores(chris_predictions, ep4_answers);
        episode4[2] = update_scores(connor_predictions, ep4_answers);
        episode4[3] = update_scores(jac_predictions, ep4_answers);
        episode4[4] = update_scores(julia_predictions, ep4_answers);

        episode5[0] = update_scores(adam_predictions, ep5_answers);
        episode5[1] = update_scores(chris_predictions, ep5_answers);
        episode5[2] = update_scores(connor_predictions, ep5_answers);
        episode5[3] = update_scores(jac_predictions, ep5_answers);
        episode5[4] = update_scores(julia_predictions, ep5_answers);

        episode6[0] = update_scores(adam_predictions, ep6_answers);
        episode6[1] = update_scores(chris_predictions, ep6_answers);
        episode6[2] = update_scores(connor_predictions, ep6_answers);
        episode6[3] = update_scores(jac_predictions, ep6_answers);
        episode6[4] = update_scores(julia_predictions, ep6_answers);

    </script>

    <!-- Import needs to be before slider in order for graphs to work -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>

    <div class="container">

        <!-- Title and Description -->
        <div class="row">
            <div class="col-lg-12">
                <h1 class="pb-2 mt-4 mb-2 border-bottom">Game of Thrones Predictions</h1>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <p>This is where some short content explaining the page will be written</p>
            </div>
        </div>


        <!-- Graph Carousel -->
        <div class="row">
            <div class="col-lg-12">
                <h2 class="pb-1 mt-4 mb-4 border-bottom">Current Score</h2>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div id="graphCarousel" class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <canvas id="barChart"></canvas>
                            <script>
                                var barChart = document.getElementById('barChart').getContext('2d');
                                var chart = new Chart(barChart, {
                                    // The type of chart we want to create
                                    type: 'bar',

                                    // The data for our dataset
                                    data: {
                                        labels: ['Adam', 'Chris', 'Connor', 'Jac', 'Julia'],
                                        datasets: [{
                                            label: 'Total Prediction Score',
                                            backgroundColor: ['#93d7ff', '#d9c9ff', '#ffe1c9', '#d0ffc9', '#ffc9f0'],
                                            data: [episode6[0], episode6[1], episode6[2], episode6[3], episode6[4], episode6[5]]
                                        }]
                                    },

                                    // Configuration options go here
                                    options: {
                                        legend: {
                                            display: false
                                        },
                                        scales: {
                                            yAxes: [{
                                                ticks: { min: 0 }
                                            }]
                                        }
                                    }
                                });

                                Chart.scaleService.updateScaleDefaults('linear', {
                                    ticks: {
                                        min: 0
                                    }
                                });

                            </script>
                        </div>
                        <div class="carousel-item">
                            <canvas id="lineChart"></canvas>
                            <script>
                                var lineChart = document.getElementById('lineChart').getContext('2d');
                                var chart = new Chart(lineChart, {
                                    // The type of chart we want to create
                                    type: 'line',

                                    // The data for our dataset
                                    data: {
                                        labels: ['Start', 'Ep1', 'Ep2', 'Ep3', 'Ep4', 'Ep5', 'Ep6'],
                                        datasets: [
                                            {   //['#93d7ff', '#d9c9ff', '#ffe1c9', '#d0ffc9', '#ffc9f0']
                                                label: 'Adam',
                                                borderColor: '#93d7ff',
                                                backgroundColor: "#93d7ff",
                                                fill: false,
                                                data: [start[0], episode1[0], episode2[0], episode3[0], episode4[0], episode5[0], episode6[0]]
                                            },
                                            {
                                                label: 'Chris',
                                                borderColor: '#d9c9ff',
                                                backgroundColor: "#d9c9ff",
                                                fill: false,
                                                data: [start[1], episode1[1], episode2[1], episode3[1], episode4[1], episode5[1], episode6[1]]
                                            },
                                            {
                                                label: 'Connor',
                                                borderColor: '#ffe1c9',
                                                backgroundColor: "#ffe1c9",
                                                fill: false,
                                                data: [start[2], episode1[2], episode2[2], episode3[2], episode4[2], episode5[2], episode6[2]]
                                            },
                                            {
                                                label: 'Jac',
                                                borderColor: '#d0ffc9',
                                                backgroundColor: "#d0ffc9",
                                                fill: false,
                                                data: [start[3], episode1[3], episode2[3], episode3[3], episode4[3], episode5[3], episode6[3]]
                                            },
                                            {
                                                label: 'Julia',
                                                borderColor: '#ffc9f0',
                                                backgroundColor: "#ffc9f0",
                                                fill: false,
                                                data: [start[4], episode1[4], episode2[4], episode3[4], episode4[4], episode5[4], episode6[4]]
                                            }]
                                    },

                                    // Configuration options go here
                                    options: {
                                        elements: {
                                            line: {
                                                /*
                                                    This line ensures that lines are straight
                                                    on our line graph. They were bezier curves
                                                    by default
                                                */
                                                tension: 0
                                            }
                                        },

                                        scales: {
                                            yAxes: [{
                                                /*
                                                    This ensures that the y axis always includes 0
                                                */
                                                ticks: { min: 0 }
                                            }]
                                        }
                                    }
                                });

                            </script>
                        </div>
                    </div>
                    <a class="carousel-control-prev" href="#graphCarousel" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#graphCarousel" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12">
                <h2 class="pb-1 mt-4 mb-4 border-bottom">Everyone's Picks</h2>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12">
                <div id="tableCarousel" class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner">
                        <div class="carousel-item active">

                            <div class="row">
                                <div class="col-lg-12">
                                    <h3 class="pb-1 mt-4 mb-4 border-bottom">Adam</h3>
                                </div>
                            </div>

                            <table id="adam-table" class="table table-sm">
                                <thead class="thead-dark">
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Character</th>
                                        <th scope="col">Lives / Dies</th>
                                    </tr>
                                </thead>

                                </tbody>
                            </table>

                        </div>

                        <div class="carousel-item">

                            <div class="row">
                                <div class="col-lg-12">
                                    <h3 class="pb-1 mt-4 mb-4 border-bottom">Chris</h3>
                                </div>
                            </div>

                            <table id="chris-table" class="table table-sm">
                                <thead class="thead-dark">
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Character</th>
                                        <th scope="col">Lives / Dies</th>
                                    </tr>
                                </thead>

                                </tbody>
                            </table>

                        </div>

                        <div class="carousel-item">

                            <div class="row">
                                <div class="col-lg-12">
                                    <h3 class="pb-1 mt-4 mb-4 border-bottom">Connor</h3>
                                </div>
                            </div>

                            <table id="connor-table" class="table table-sm">
                                <thead class="thead-dark">
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Character</th>
                                        <th scope="col">Lives / Dies</th>
                                    </tr>
                                </thead>

                                </tbody>
                            </table>

                        </div>

                        <div class="carousel-item">

                            <div class="row">
                                <div class="col-lg-12">
                                    <h3 class="pb-1 mt-4 mb-4 border-bottom">Jac</h3>
                                </div>
                            </div>

                            <table id="jac-table" class="table table-sm">
                                <thead class="thead-dark">
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Character</th>
                                        <th scope="col">Lives / Dies</th>
                                    </tr>
                                </thead>

                                </tbody>
                            </table>

                        </div>

                        <div class="carousel-item">

                            <div class="row">
                                <div class="col-lg-12">
                                    <h3 class="pb-1 mt-4 mb-4 border-bottom">Julia</h3>
                                </div>
                            </div>

                            <table id="julia-table" class="table table-sm">
                                <thead class="thead-dark">
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Character</th>
                                        <th scope="col">Lives / Dies</th>
                                    </tr>
                                </thead>

                                </tbody>
                            </table>

                        </div>
                    </div>
                    <a class="carousel-control-prev" href="#tableCarousel" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#tableCarousel" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Start of Javascript References required for Bootstrap -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    <!-- End of Javascript References required for Bootstrap -->

    <!-- TODO: Move this Javascript snippet into its own file -->
    <script>

        $('.carousel').carousel({
            interval: false,
            touch: true
        });

    </script>

    <!-- TODO: Move this Javascript Snippet into its own file -->
    <script>

        const adam_table = document.querySelector('#adam-table');
        const chris_table = document.querySelector('#chris-table');
        const connor_table = document.querySelector('#connor-table');
        const jac_table = document.querySelector('#jac-table');
        const julia_table = document.querySelector('#julia-table');

        function fillTable(table, predictions) {
            //<tr>
            // <th scope="row">NUMBER</th>
            // <td>CHARACTER</td>
            // <td class="data">LIVES/DIES</td>
            //</tr>

            for (let i = 0; i < 36; i++) {

                // Container of all information
                let row = document.createElement("TR");

                // First Column
                let col1 = document.createElement("TH");
                let col1_content = document.createTextNode((i + 1).toString());
                col1.appendChild(col1_content);
                row.appendChild(col1);

                // Second Column
                let col2 = document.createElement("TD");
                let col2_content = document.createTextNode(characters[i]);
                col2.appendChild(col2_content);
                row.appendChild(col2);

                // Third Column
                let col3 = document.createElement("TD");
                let state = (predictions[i]) ? "Lives" : "Dies";
                let col3_content = document.createTextNode(state);
                col3.appendChild(col3_content);
                row.appendChild(col3);

                table.appendChild(row);
            }
        }

        fillTable(adam_table, adam_predictions);
        fillTable(chris_table, chris_predictions);
        fillTable(connor_table, connor_predictions);
        fillTable(jac_table, jac_predictions);
        fillTable(julia_table, julia_predictions);


    </script>

</body>

</html>